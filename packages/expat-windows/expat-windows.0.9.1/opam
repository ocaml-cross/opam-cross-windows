opam-version: "2.0"
maintainer: "whitequark@whitequark.org"
patches: ["patches/Makefile.patch"]
build: [
  ["env" "OCAMLFIND_TOOLCHAIN=windows" make "all"]
  ["env" "OCAMLFIND_TOOLCHAIN=windows" make "allopt"]
]
install: [
  ["env" "OCAMLFIND_TOOLCHAIN=windows" make "install"]
]
remove: [["ocamlfind" "-toolchain" "windows" "remove" "expat"]]
depends: [
  "ocaml"
  "ocaml-windows"
  "ocamlfind" {build}
]
synopsis: "Write XML-Parsers using the SAX method"
description: """
An ocaml wrapper for the Expat XML parsing library. It allows you to
write XML-Parsers using the SAX method. An XML document is parsed on
the fly without needing to load the entire XML-Tree into memory."""
flags: light-uninstall
url {
  src: "http://mmzeeman.home.xs4all.nl/ocaml/ocaml-expat-0.9.1.tar.gz"
  checksum: "md5=17aa00a46c5edeb815f1b0555bad7ed2"
}
depexts: [
  ["expat"] {os-distribution = "mxe"}
]
extra-source "patches/Makefile.patch" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/expat-windows/expat-windows.0.9.1/patches/Makefile.patch"
  checksum:
    "sha256=501ce6d3e3606214b073851132d25d505de145fb22aa6ec904221ce691fc6d53"
}
