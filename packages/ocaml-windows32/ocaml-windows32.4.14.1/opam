opam-version: "2.0"
maintainer: "whitequark@whitequark.org"
patches: [
  "patches/ostype-fix.patch"
  "patches/configure.patch"
  "patches/windows-append.patch"
]
substs: [
  "windows.conf"
]
build: [
  ["/bin/sh" "./build.sh" "%{conf-gcc-windows32:host}%" "%{prefix}%" "%{flexdll-windows:lib}%"]
]
install: [
  ["/bin/sh" "./install.sh" "%{prefix}%" "%{flexdll-windows:lib}%"]
]
depends: [
  "ocaml" {= version}
  "ocaml-option-32bit" {arch = "x86_64"}
  "ocamlfind" {>= "1.5.4"}
  "conf-gcc-windows32"
  "flexdll-windows" {>= "0.42"}
]
depopts: [
  "conf-flambda-windows"
]
available: arch = "x86_32" | arch = "x86_64" | (arch = "arm64" & os = "macos")
conflicts: [
  "ocaml-windows64"
]
synopsis: "OCaml cross-compiler for 32-bit x86 Windows targets"
url {
  src: "https://github.com/ocaml/ocaml/archive/4.14.1.tar.gz"
  checksum: "md5=92e7b1f8acb2b2de5c63d93ed9e5cc21"
}
extra-source "windows.conf.in" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/windows.conf.in"
  checksum:
    "sha256=183129166188ee3d21bf2c7bd732f2ef8bc9e0f2819d8316cf9c17fed1814446"
}
extra-source "remove.sh" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/remove.sh"
  checksum:
    "sha256=8802e7c23d30b6889e4a731641e64520c9e01ec1d4086bc3a55e5f6bb06918b9"
}
extra-source "install.sh" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/install.sh"
  checksum:
    "sha256=17c6fbe43c77717376d308d9138c65b64e6f49b6099c8376443833befb362ceb"
}
extra-source "build.sh" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/build.sh"
  checksum:
    "sha256=c0639f12fc0bdec0e47f4c7a68e166085e2abfca9824025067379adc020a373e"
}
extra-source "patches/windows-append.patch" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/patches/windows-append.patch"
  checksum:
    "sha256=e44109efcd0e710686a09ed8f7ba38b0013b14af171d6d6da7a13c3d6b2bc9f2"
}
extra-source "patches/ostype-fix.patch" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/patches/ostype-fix.patch"
  checksum:
    "sha256=5a8fe3fa2df61fedde9bc356bfa39a8d37fad793d3c316f8110f1f1a8c076526"
}
extra-source "patches/configure.patch" {
  src:
    "https://raw.githubusercontent.com/ocaml-cross/opam-cross-windows/main/patches/ocaml-windows32/ocaml-windows32.4.14.1/patches/configure.patch"
  checksum:
    "sha256=57891a571a818ad7f103022d6dd2c4820f548bba332ac1cc15c3e109b76aa451"
}
